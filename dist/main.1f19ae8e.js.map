{"version":3,"sources":["main.js"],"names":["COMBINATIONS_MATRIX","POSSIBLE_PLAYS","newGame","document","querySelector","markBtnO","markBtnX","start","cellElements","querySelectorAll","turnIconX","turnIconO","xScore","getElementById","oScore","tie","dialogBox","cssRoot","cssRootStyle","getComputedStyle","playerVsPlayerButton","cpuVsPlayerButton","restartBtn","playerWonLost","won","lost","iconContainer","takesRound","restart","tied","quitCancelBtn","roundRestartBtn","type","first","second","third","fourth","fifth","sixth","seventh","eighth","nineth","tenth","markObj","turnObj","player1Obj","player2Obj","cellsGridObj","computerObj","xScoreContent","oScoreContent","newGameClass","xChoiceButtonClass","oChoiceButtonClass","startClass","turnIconXClass","turnIconOClass","restartBtnClass","cellsClass","tieContent","cellObjs","markPrototype","updateMark","classList","contains","p1Mark","p2Mark","switch","toggle","getProperties","obj","setProperties","Mark","prototype","constructor","playerPrototype","updateScore","scoreString","score","toString","mark","textContent","initializeScore","scoreCell","name","generateClick","id","player2","cellsGrid","totalClicks","click","reset","track","Player","turnPrototype","thirdRecipe","currentTurn","previousTurn","show","markPrevious","markCurrent","remove","add","Turn","cellPrototype","markAsWinner","marked","addClickEvent","clickEventHandler","bind","addEventListener","removeClickEvent","removeEventListener","resetCell","resetCellBackground","removeAttribute","showCellMark","Cell","event","stopPropagation","preventDefault","allCellsId","includes","currentTarget","turn","clickCentinel","playerName","computer","anotate","populateStorage","isItMyTurn","computerMove","chooseMove","cellsGridPrototype","addAllCellsClickEvent","cells","cell","removeCellsClick","init","cellId","push","cellIdNumber","Number","player1","combinations","forEach","e","i","tiesTrack","result","winnerCentinel","player1TrackIndex","findIndex","x","player2TrackIndex","tiedGame","cellsId","summary","tiesScore","winnerData","markWinnerCells","UpdateScore","dialog","showDialog","populateDialogStorage","player","tieScoreSlot","configure","resetGrid","cellElement","cellsIds","pos","CellsGrid","computerPrototype","initialize","possiblePlays","JSON","parse","stringify","cellClicked","length","index","splice","iHaveWinningMove","haveIWinningMove","playerHaveWinningMove","havePWinningMove","playerHaveHalfEmptyCombs","havePHalfEmptyCombs","playerHaveEmptyCombs","havePEmptyCombs","element","takeFirstOpt","indexToReturn","arr","Computer","dialogPrototype","close","setAttribute","dialogElemList","entries","key","entrie","kind","style","color","getPropertyValue","ye","replace","Dialog","restartNewRound","cellsCreator","cellsArray","cellPosition","cellElementKey","getAttribute","sessionStorage","setItem","xScorePlayer","innerHTML","xScoreScore","oScorePlayer","oScoreScore","dialogBoxObj","dialogBoxOpen","hasAttribute","dataset","setStyle","getItem","Object","value","button","target","toLowerCase","clear","window","location","reload"],"mappings":"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","file":"main.1f19ae8e.js","sourceRoot":"..\\src","sourcesContent":["// ============================================================================\r\n// ---------------------------------CONSTS-------------------------------------\r\n// ============================================================================\r\nconst COMBINATIONS_MATRIX = [\r\n\t[ 1, 5, 9 ],\r\n\t[ 1, 6, 8 ],\r\n\t[ 2, 4, 9 ],\r\n\t[ 2, 5, 8 ],\r\n\t[ 2, 6, 7 ],\r\n\t[ 3, 4, 8 ],\r\n\t[ 3, 5, 7 ],\r\n\t[ 4, 5, 6 ]\r\n];\r\nconst POSSIBLE_PLAYS = [ 5, 2, 4, 6, 8, 1, 3, 7, 9 ];\r\n\r\n// DOM INTIALIZING\r\n// page new game\r\nconst newGame = document.querySelector( '#new-game' );\r\n\r\n// choice buttons\r\nconst markBtnO = document.querySelector( '#o-choice-button' );\r\nconst markBtnX = document.querySelector( '#x-choice-button' );\r\n// page start\r\nconst start = document.querySelector( '#start' );\r\nconst cellElements = document.querySelectorAll( \"#start #cells > div\" );\r\nconst turnIconX = document.querySelector( '.turn .icon-x' );\r\nconst turnIconO = document.querySelector( '.turn .icon-o' );\r\nconst xScore = document.getElementById( \"x-score\" );\r\nconst oScore = document.getElementById( \"o-score\" );\r\nconst tie = document.getElementById( \"ties\" );\r\n\r\n// dialog page\r\nconst dialogBox = document.querySelector( \"#dialog-box\" );\r\n\r\n// CSS Variables\r\nconst cssRoot = document.querySelector( \":root\" );\r\nconst cssRootStyle = getComputedStyle( cssRoot );\r\n\r\n// BUTTONS\r\nlet playerVsPlayerButton = document.querySelector(\r\n\t'#player1-vs-player2-button'\r\n);\r\nconst cpuVsPlayerButton = document.querySelector( \"#cpu-vs-player-button\" );\r\nconst restartBtn = document.getElementById( \"restart-button\" );\r\n\r\n// dialog initializing\r\n// head\r\nconst playerWonLost = document.querySelector( '#dialog-box #player-won-lost' );\r\nconst won = document.querySelector( '#dialog-box #won' );\r\nconst lost = document.querySelector( '#dialog-box #lost' );\r\n// main take a round\r\nconst iconContainer = document.querySelector( \"#msg-body #msg-icon-container\" );\r\nconst takesRound = document.querySelector( '#dialog-box #takes-round' );\r\n// main Restart and Tied\r\nconst restart = document.querySelector( '#dialog-box #restart' );\r\nconst tied = document.querySelector( '#dialog-box #tied' );\r\n// foot\r\nconst quitCancelBtn = document.querySelector( '#dialog-box footer #quit-cancel' );\r\nconst roundRestartBtn = document.querySelector(\r\n\t'#dialog-box footer #round-restart' );\r\n\r\nconst type = {\r\n\tfirst: 'player1-X',\r\n\tsecond: 'player1-O',\r\n\tthird: 'player2-X',\r\n\tfourth: 'player2-O',\r\n\tfifth: 'won-X',\r\n\tsixth: 'won-O',\r\n\tseventh: 'lost-X',\r\n\teighth: 'lost-O',\r\n\tnineth: 'restart',\r\n\ttenth: 'tied',\r\n};\r\n// to sessionStorage use\r\nlet markObj, turnObj, player1Obj, player2Obj, cellsGridObj, computerObj, xScoreContent, oScoreContent;\r\nlet newGameClass, xChoiceButtonClass, oChoiceButtonClass, startClass, turnIconXClass, turnIconOClass, restartBtnClass, cellsClass, tieContent;\r\nlet cellObjs = [];\r\n// =============================================================================\r\n// -------------------------------------OBJECTS---------------------------------\r\n// =============================================================================\r\n// MARK OBJECT\r\nlet markPrototype = {\r\n\tupdateMark() {\r\n\t\tif ( markBtnX.classList.contains( 'active-mark-button' ) ) {\r\n\t\t\tthis.p1Mark = 'x';\r\n\t\t\tthis.p2Mark = 'o';\r\n\t\t} else {\r\n\t\t\tthis.p2Mark = 'x';\r\n\t\t\tthis.p1Mark = 'o';\r\n\t\t}\r\n\t},\r\n\tswitch () {\r\n\t\tmarkBtnX.classList.toggle( 'active-mark-button' );\r\n\t\tmarkBtnO.classList.toggle( 'active-mark-button' );\r\n\t\tthis.updateMark();\r\n\t},\r\n\tget getProperties() {\r\n\t\tlet obj = {\r\n\t\t\tp1Mark: this.p1Mark,\r\n\t\t\tp2Mark: this.p2Mark\r\n\t\t}\r\n\t\treturn obj;\r\n\t},\r\n\tset setProperties( obj ) {\r\n\t\tthis.p1Mark = obj.p1Mark;\r\n\t\tthis.p2Mark = obj.p2Mark;\r\n\t}\r\n};\r\n// Mark constructor function\r\nfunction Mark() {\r\n\tthis.p1Mark = 'x';\r\n\tthis.p2Mark = 'o';\r\n}\r\nMark.prototype = markPrototype;\r\nMark.prototype.constructor = Mark;\r\n// PLAYER OBJECT\r\nlet playerPrototype = {\r\n\tupdateScore() {\r\n\t\tlet scoreString = this.score.toString();\r\n\t\tif ( this.score < 10 ) {\r\n\t\t\tscoreString = '0' + scoreString;\r\n\t\t}\r\n\t\tif ( this.mark === \"x\" ) {\r\n\t\t\txScore.querySelector( '.score' )\r\n\t\t\t\t.textContent = scoreString;\r\n\t\t} else {\r\n\t\t\toScore.querySelector( '.score' )\r\n\t\t\t\t.textContent = scoreString;\r\n\t\t}\r\n\r\n\t},\r\n\tinitializeScore() {\r\n\t\tif ( this.mark === 'x' ) {\r\n\t\t\tthis.scoreCell = xScore;\r\n\t\t} else {\r\n\t\t\tthis.scoreCell = oScore;\r\n\t\t}\r\n\t\tthis.scoreCell.querySelector( 'p span' )\r\n\t\t\t.textContent = this.name;\r\n\t},\r\n\t//For CPU user\r\n\tgenerateClick( id ) {\r\n\t\tif ( player2.name === \"CPU\" && cellsGrid.totalClicks < 9 ) {\r\n\t\t\tdocument.getElementById( `${id}` )\r\n\t\t\t\t.click();\r\n\t\t}\r\n\t},\r\n\treset() {\r\n\t\tthis.track = [ 0, 0, 0, 0, 0, 0, 0, 0 ];\r\n\t},\r\n\tget getProperties() {\r\n\t\tlet obj = {\r\n\t\t\tmark: this.mark,\r\n\t\t\tname: this.name,\r\n\t\t\tscore: this.score,\r\n\t\t\ttrack: this.track\r\n\t\t}\r\n\t\treturn obj;\r\n\t},\r\n\tset setProperties( obj ) {\r\n\t\tthis.mark = obj.mark;\r\n\t\tthis.name = obj.name;\r\n\t\tthis.score = obj.score;\r\n\t\tthis.track = obj.track;\r\n\t}\r\n};\r\n\r\nfunction Player() {\r\n\tthis.mark = '';\r\n\tthis.name = '';\r\n\tthis.score = 0;\r\n\tthis.scoreCell = {};\r\n\tthis.track = [ 0, 0, 0, 0, 0, 0, 0, 0 ]\r\n}\r\n\r\nPlayer.prototype = playerPrototype;\r\nPlayer.prototype.constructor = Player;\r\n\r\n// TURN OBJECT\r\nlet turnPrototype = {\r\n\tswitch () {\r\n\t\tlet thirdRecipe;\r\n\t\tthirdRecipe = this.currentTurn;\r\n\t\tthis.currentTurn = this.previousTurn;\r\n\t\tthis.previousTurn = thirdRecipe;\r\n\t\tthis.show();\r\n\t},\r\n\tshow() {\r\n\t\tlet markPrevious = this.previousTurn;\r\n\t\tlet markCurrent = this.currentTurn;\r\n\t\tturnIconO.classList.remove( 'not-show-element' );\r\n\t\tturnIconX.classList.add( 'not-show-element' );\r\n\t\tif ( markCurrent === \"x\" ) {\r\n\t\t\tturnIconX.classList.remove( 'not-show-element' );\r\n\t\t\tturnIconO.classList.add( 'not-show-element' );\r\n\t\t}\r\n\r\n\t},\r\n\treset() {\r\n\t\tthis.currentTurn = 'x';\r\n\t\tthis.previousTurn = 'o';\r\n\t\tthis.show();\r\n\t},\r\n\tget getProperties() {\r\n\t\tlet obj = {\r\n\t\t\tcurrentTurn: this.currentTurn,\r\n\t\t\tpreviousTurn: this.previousTurn\r\n\t\t}\r\n\t\treturn obj;\r\n\t},\r\n\tset setProperties( obj ) {\r\n\t\tthis.currentTurn = obj.currentTurn;\r\n\t\tthis.previousTurn = obj.previousTurn;\r\n\t}\r\n};\r\n\r\nfunction Turn() {\r\n\tthis.currentTurn = 'x';\r\n\tthis.previousTurn = 'o';\r\n}\r\nTurn.prototype = turnPrototype;\r\nTurn.prototype.constructor = Turn;\r\n\r\n// CELL OBJECT\r\nconst cellPrototype = {\r\n\tmarkAsWinner() {\r\n\t\tdocument.getElementById( this.id )\r\n\t\t\t.classList.add( `cell-background-win-${this.marked}` )\r\n\t},\r\n\r\n\taddClickEvent() {\r\n\t\tthis.clickEventHandler = this.clickEventHandler.bind( this );\r\n\t\tif ( !this.marked ) {\r\n\t\t\tdocument.getElementById( this.id )\r\n\t\t\t\t.addEventListener( \"click\", this.clickEventHandler, false );\r\n\t\t}\r\n\r\n\t},\r\n\tremoveClickEvent() {\r\n\t\tdocument.getElementById( this.id )\r\n\t\t\t.removeEventListener( \"click\", this.clickEventHandler, false );\r\n\t},\r\n\tresetCell() {\r\n\t\tthis.marked = \"\";\r\n\t\tthis.addClickEvent();\r\n\t\tthis.resetCellBackground();\r\n\t},\r\n\tresetCellBackground() {\r\n\t\tdocument.getElementById( this.id )\r\n\t\t\t.removeAttribute( \"class\" );\r\n\t},\r\n\tshowCellMark( mark ) {\r\n\t\tdocument.getElementById( this.id )\r\n\t\t\t.classList.add( `cell-background-${this.marked}` );\r\n\r\n\t},\r\n\tget getProperties() {\r\n\t\tlet obj = {\r\n\t\t\tmarked: this.marked,\r\n\t\t\tid: this.id\r\n\t\t}\r\n\t\treturn obj;\r\n\t},\r\n\tset setProperties( obj ) {\r\n\t\tthis.marked = obj.marked;\r\n\t\tthis.id = obj.id;\r\n\t}\r\n};\r\n\r\nfunction Cell( id ) {\r\n\tthis.marked = \"\";\r\n\tthis.id = id;\r\n\tthis.clickEventHandler = function ( event ) {\r\n\t\tevent.stopPropagation();\r\n\t\tevent.preventDefault();\r\n\t\t// Using this if-statement to fix the clicking twice bug\r\n\t\tif ( !cellsGrid.allCellsId.includes( event.currentTarget.id ) ) {\r\n\t\t\tthis.marked = turn.currentTurn;\r\n\t\t\trestartBtn.removeAttribute( \"disabled\" );\r\n\t\t\tthis.showCellMark();\r\n\t\t\tcellsGrid.clickCentinel( this.marked, this.playerName, this.id )\r\n\t\t\tthis.removeClickEvent();\r\n\t\t\tif ( player2.name === \"CPU\" ) {\r\n\t\t\t\tcomputer.anotate();\r\n\t\t\t}\r\n\t\t\tturn.switch();\r\n\t\t\tpopulateStorage();\r\n\t\t\t// managing computer move\r\n\t\t\tif ( player2.name === \"CPU\" ) {\r\n\t\t\t\tif ( computer.isItMyTurn() ) {\r\n\t\t\t\t\tlet computerMove = computer.chooseMove();\r\n\t\t\t\t\tplayer2.generateClick( computerMove );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\nCell.prototype = cellPrototype;\r\nCell.prototype.constructor = Cell;\r\n\r\n// CELLSGRID OBJECT\r\nconst cellsGridPrototype = {\r\n\r\n\taddAllCellsClickEvent() {\r\n\t\tfor ( cell of cells ) {\r\n\t\t\tcell.addClickEvent();\r\n\t\t}\r\n\t},\r\n\r\n\tremoveCellsClick() {\r\n\t\tfor ( cell of cells ) {\r\n\t\t\tcell.removeClickEvent();\r\n\t\t}\r\n\t},\r\n\r\n\tinit() {\r\n\t\tthis.addAllCellsClickEvent();\r\n\t},\r\n\r\n\tclickCentinel( mark, name, cellId ) {\r\n\t\tthis.totalClicks++\r\n\t\tthis.allCellsId.push( cellId );\r\n\t\tvar cellIdNumber = Number( cellId );\r\n\t\t// update players track arrays\r\n\t\tif ( mark === player1.mark ) {\r\n\t\t\tthis.combinations.forEach( ( e, i ) => {\r\n\t\t\t\tif ( e.includes( cellIdNumber ) ) {\r\n\t\t\t\t\tplayer1.track[ i ]++;\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t} else if ( mark === player2.mark ) {\r\n\t\t\tthis.combinations.forEach( ( e, i ) => {\r\n\t\t\t\tif ( e.includes( cellIdNumber ) ) {\r\n\t\t\t\t\tplayer2.track[ i ]++;\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t}\r\n\t\tthis.tiesTrack = () => {\r\n\t\t\tlet result = [];\r\n\t\t\tfor ( let i = 0; i < 8; i++ ) {\r\n\t\t\t\tresult.push( player1.track[ i ] * player2.track[ i ] )\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tthis.winnerCentinel();\r\n\t},\r\n\r\n\twinnerCentinel() {\r\n\t\tlet player1TrackIndex = player1.track.includes( 3 ) ?\r\n\t\t\tplayer1.track.findIndex( ( x ) => x === 3 ) : false;\r\n\r\n\t\tlet player2TrackIndex = player2.track.includes( 3 ) ?\r\n\t\t\tplayer2.track.findIndex( ( x ) => x === 3 ) : false;\r\n\r\n\t\tlet tiedGame = !this.tiesTrack()\r\n\t\t\t.includes( 0 );\r\n\r\n\t\tif ( player1TrackIndex || player1TrackIndex === 0 ) {\r\n\t\t\tthis.won.playerName = player1.name;\r\n\t\t\tthis.won.mark = player1.mark;\r\n\t\t\tthis.won.cellsId = this.combinations[ player1TrackIndex ];\r\n\t\t\tplayer1.score++;\r\n\t\t\tthis.summary( this.won )\r\n\t\t\treturn;\r\n\t\t} else if ( player2TrackIndex || player2TrackIndex === 0 ) {\r\n\t\t\tthis.won.playerName = player2.name;\r\n\t\t\tthis.won.mark = player2.mark;\r\n\t\t\tthis.won.cellsId = this.combinations[ player2TrackIndex ];\r\n\t\t\tplayer2.score++;\r\n\t\t\tthis.summary( this.won );\r\n\t\t\treturn;\r\n\t\t} else if ( tiedGame ) {\r\n\t\t\tthis.tiesScore++\r\n\t\t\tthis.won.playerName = \"none\";\r\n\t\t\tthis.summary( this.won );\r\n\t\t\treturn;\r\n\t\t}\r\n\t},\r\n\r\n\tsummary( winnerData ) {\r\n\t\tthis.markWinnerCells( this.won.cellsId );\r\n\t\tthis.UpdateScore();\r\n\t\tthis.removeCellsClick();\r\n\t\tdialog.show();\r\n\t\tthis.showDialog();\r\n\t\tpopulateDialogStorage();\r\n\t},\r\n\r\n\tUpdateScore() {\r\n\t\tlet player = this.won.playerName;\r\n\t\tswitch ( player ) {\r\n\t\tcase player1.name:\r\n\t\t\tplayer1.updateScore();\r\n\t\t\tbreak;\r\n\t\tcase player2.name:\r\n\t\t\tplayer2.updateScore();\r\n\t\t\tbreak;\r\n\t\tcase \"none\":\r\n\t\t\tlet tieScoreSlot = document.querySelector( \"#start #ties\" )\r\n\t\t\tlet scoreString = this.tiesScore.toString();\r\n\t\t\tif ( this.tiesScore < 10 ) {\r\n\t\t\t\tscoreString = '0' + scoreString;\r\n\t\t\t}\r\n\t\t\ttieScoreSlot.querySelector( '.score' )\r\n\t\t\t\t.textContent = scoreString;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\r\n\tshowDialog() {\r\n\t\tlet mark = this.won.mark;\r\n\t\tlet player = this.won.playerName;\r\n\t\tif ( player === \"none\" ) {\r\n\t\t\tdialog.configure( \"tied\" );\r\n\t\t}\r\n\t\tswitch ( player ) {\r\n\t\tcase \"P1\":\r\n\t\t\tif ( mark === \"x\" ) {\r\n\t\t\t\tif ( player2.name === \"CPU\" ) {\r\n\t\t\t\t\tdialog.configure( \"won-X\" );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdialog.configure( \"player1-X\" );\r\n\t\t\t\t}\r\n\t\t\t} else if ( mark === \"o\" ) {\r\n\t\t\t\tif ( player2.name === \"CPU\" ) {\r\n\t\t\t\t\tdialog.configure( \"won-O\" );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdialog.configure( \"player1-O\" );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase \"P2\":\r\n\t\t\tif ( mark === \"x\" ) {\r\n\t\t\t\tdialog.configure( \"player2-X\" );\r\n\t\t\t} else if ( mark === \"o\" ) {\r\n\t\t\t\tdialog.configure( \"player2-O\" );\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase \"CPU\":\r\n\t\t\tif ( mark === \"x\" ) {\r\n\t\t\t\tdialog.configure( \"lost-X\" );\r\n\t\t\t} else if ( mark === \"o\" ) {\r\n\t\t\t\tdialog.configure( \"lost-O\" );\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\r\n\tresetGrid() {\r\n\t\tfor ( cellElement of cells ) {\r\n\t\t\tcellElement.resetCell();\r\n\t\t}\r\n\t\tthis.won.cellsId = [];\r\n\t\tthis.won.playerName = \"\";\r\n\t\tthis.won.mark = \"\";\r\n\t\tthis.totalClicks = 0;\r\n\t\tthis.allCellsId = [];\r\n\t\tthis.tiesTrack = [ 0, 0, 0, 0, 0, 0, 0, 0 ];\r\n\t},\r\n\r\n\tmarkWinnerCells( cellsIds ) {\r\n\t\tfor ( cellId of cellsIds ) {\r\n\t\t\tlet pos = cellId - 1;\r\n\t\t\tcells[ pos ].markAsWinner();\r\n\t\t}\r\n\t},\r\n\r\n\tget getProperties() {\r\n\t\tlet obj = {\r\n\t\t\twon: this.won,\r\n\t\t\ttotalClicks: this.totalClicks,\r\n\t\t\ttiesScore: this.tiesScore,\r\n\t\t\tallCellsId: this.allCellsId,\r\n\t\t\ttiesTrack: this.tiesTrack,\r\n\t\t}\r\n\t\treturn obj;\r\n\t},\r\n\r\n\tset setProperties( obj ) {\r\n\t\tthis.won = obj.won;\r\n\t\tthis.totalClicks = obj.totalClicks;\r\n\t\tthis.tiesScore = obj.tiesScore;\r\n\t\tthis.allCellsId = obj.allCellsId;\r\n\t\tthis.tiesTrack = obj.tiesTrack;\r\n\t}\r\n};\r\n\r\nfunction CellsGrid() {\r\n\tthis.won = {\r\n\t\tplayerName: \"\",\r\n\t\tcellsId: [],\r\n\t\tmark: \"\"\r\n\t};\r\n\tthis.totalClicks = 0;\r\n\tthis.tiesScore = 0;\r\n\tthis.allCellsId = [];\r\n\tthis.combinations = [\r\n\t\t[ 1, 5, 9 ],\r\n\t\t[ 1, 6, 8 ],\r\n\t\t[ 2, 4, 9 ],\r\n\t\t[ 2, 5, 8 ],\r\n\t\t[ 2, 6, 7 ],\r\n\t\t[ 3, 4, 8 ],\r\n\t\t[ 3, 5, 7 ],\r\n\t\t[ 4, 5, 6 ]\r\n\t];\r\n\tthis.tiesTrack = [ 0, 0, 0, 0, 0, 0, 0, 0 ];\r\n}\r\n\r\nCellsGrid.prototype = cellsGridPrototype;\r\nCellsGrid.prototype.constructor = CellsGrid;\r\n\r\n// COMPUTER OBJECT\r\ncomputerPrototype = {\r\n\tinitialize() {\r\n\t\tthis.possiblePlays = JSON.parse( JSON.stringify( POSSIBLE_PLAYS ) );\r\n\t},\r\n\tanotate() {\r\n\t\t// pop out the number clicked from the possible future moves\r\n\t\tlet cellClicked = Number( cellsGrid.allCellsId[ cellsGrid.allCellsId.length - 1 ] );\r\n\t\tvar index = this.possiblePlays.findIndex( ( x ) => x === cellClicked );\r\n\t\tthis.possiblePlays.splice( index, 1 );\r\n\t},\r\n\t// Analize the options and return the chosen move\r\n\tchooseMove() {\r\n\t\tvar iHaveWinningMove = this.haveIWinningMove();\r\n\t\tvar playerHaveWinningMove = this.havePWinningMove();\r\n\t\tvar playerHaveHalfEmptyCombs = this.havePHalfEmptyCombs();\r\n\t\tvar playerHaveEmptyCombs = this.havePEmptyCombs();\r\n\r\n\t\tif ( iHaveWinningMove || iHaveWinningMove === 0 ) {\r\n\r\n\t\t\tfor ( let element of this.possiblePlays ) {\r\n\t\t\t\tif ( cellsGrid.combinations[ iHaveWinningMove ].includes( element ) ) {\r\n\t\t\t\t\treturn element;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t} else if ( playerHaveWinningMove || playerHaveWinningMove === 0 ) {\r\n\r\n\t\t\tfor ( let element of this.possiblePlays ) {\r\n\t\t\t\tif ( cellsGrid.combinations[ playerHaveWinningMove ].includes( element ) ) {\r\n\t\t\t\t\treturn element;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t} else if ( playerHaveHalfEmptyCombs || playerHaveHalfEmptyCombs === 0 ) {\r\n\r\n\t\t\tfor ( let element of this.possiblePlays ) {\r\n\t\t\t\tif ( cellsGrid.combinations[ playerHaveHalfEmptyCombs ].includes( element ) ) {\r\n\t\t\t\t\treturn element;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t} else if ( playerHaveEmptyCombs || playerHaveEmptyCombs === 0 ) {\r\n\r\n\t\t\tfor ( let element of this.possiblePlays ) {\r\n\t\t\t\tif ( cellsGrid.combinations[ playerHaveEmptyCombs ].includes( element ) ) {\r\n\t\t\t\t\treturn element;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t} else if ( this.possiblePlays.length ) {\r\n\t\t\treturn computer.takeFirstOpt();\r\n\t\t}\r\n\t},\r\n\t// small tasks\r\n\tisItMyTurn() {\r\n\t\tif ( turn.currentTurn === player2.mark ) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\thaveIWinningMove() {\r\n\t\tvar indexToReturn = null;\r\n\t\tplayer2.track.forEach( ( element, index ) => {\r\n\t\t\tif ( element === 2 && player1.track[ index ] == 0 ) {\r\n\t\t\t\tindexToReturn = index;\r\n\t\t\t}\r\n\t\t} );\r\n\t\treturn indexToReturn;\r\n\t},\r\n\thavePWinningMove() {\r\n\t\tvar indexToReturn = null;\r\n\t\tplayer1.track.forEach( ( element, index ) => {\r\n\t\t\tif ( element === 2 && player2.track[ index ] === 0 ) {\r\n\t\t\t\tindexToReturn = index;\r\n\t\t\t}\r\n\t\t} );\r\n\t\treturn indexToReturn;\r\n\t},\r\n\thavePEmptyCombs() {\r\n\t\tvar indexToReturn = null;\r\n\t\tplayer1.track.forEach( ( element, index ) => {\r\n\t\t\tif ( element === 0 && player2.track[ index ] === 0 ) {\r\n\t\t\t\tindexToReturn = index;\r\n\t\t\t}\r\n\t\t} );\r\n\t\treturn indexToReturn;\r\n\t},\r\n\thavePHalfEmptyCombs() {\r\n\t\tvar indexToReturn = null;\r\n\t\tplayer1.track.forEach( ( element, index ) => {\r\n\t\t\tif ( element === 0 && player2.track[ index ] === 1 ) {\r\n\t\t\t\tindexToReturn = index;\r\n\t\t\t}\r\n\t\t} );\r\n\t\treturn indexToReturn;\r\n\t},\r\n\ttakeFirstOpt() {\r\n\t\treturn this.possiblePlays[ 0 ];\r\n\t},\r\n\tget getProperties() {\r\n\t\treturn this.possiblePlays;\r\n\t},\r\n\tset setProperties( arr ) {\r\n\t\tthis.possiblePlays = arr;\r\n\t}\r\n};\r\n\r\nfunction Computer() {\r\n\tthis.possiblePlays = [];\r\n}\r\n\r\nComputer.prototype = computerPrototype;\r\nComputer.prototype.constructor = Computer;\r\n\r\n// DIALOG OBJECT\r\ndialogPrototype = {\r\n\tclose() {\r\n\t\tdialogBox.removeAttribute( \"open\" )\r\n\t},\r\n\tshow() {\r\n\t\tdialogBox.setAttribute( \"open\", \"\" )\r\n\t},\r\n\treset() {\r\n\t\tlet dialogElemList = document.querySelectorAll( \"#dialog-box p, #dialog-box h3, #dialog-box svg\" );\r\n\t\tfor ( let [ key, entrie ] of dialogElemList.entries() ) {\r\n\t\t\tentrie.classList.add( 'not-show-element' );\r\n\t\t};\r\n\t\ticonContainer.setAttribute( \"class\", \"\" );\r\n\t},\r\n\tconfigure( kind ) {\r\n\t\tswitch ( kind ) {\r\n\t\tcase type.first:\r\n\t\t\tplayerWonLost.classList.remove( 'not-show-element' );\r\n\t\t\tplayerWonLost.querySelector( '.player-number' )\r\n\t\t\t\t.textContent = \"1\";\r\n\t\t\ticonContainer.setAttribute( \"class\", \"msg-background-x\" );\r\n\t\t\ttakesRound.classList.remove( 'not-show-element' );\r\n\t\t\ttakesRound.style.color = cssRootStyle.getPropertyValue( \"--light-blue\" );\r\n\t\t\tbreak;\r\n\t\tcase type.second:\r\n\t\t\tplayerWonLost.classList.remove( 'not-show-element' );\r\n\t\t\tplayerWonLost.querySelector( '.player-number' )\r\n\t\t\t\t.textContent = \"1\";\r\n\t\t\ticonContainer.setAttribute( 'class', 'msg-background-o' );\r\n\t\t\ttakesRound.classList.remove( 'not-show-element' );\r\n\t\t\ttakesRound.style.color = cssRootStyle.getPropertyValue( \"--light-yellow\" );\r\n\t\t\tbreak;\r\n\t\t\tye\r\n\t\tcase type.third:\r\n\t\t\tplayerWonLost.classList.remove( 'not-show-element' );\r\n\t\t\tplayerWonLost.querySelector( '.player-number' )\r\n\t\t\t\t.textContent = \"2\";\r\n\t\t\ticonContainer.setAttribute( \"class\", \"msg-background-x\" );\r\n\t\t\ttakesRound.classList.remove( 'not-show-element' );\r\n\t\t\ttakesRound.style.color = cssRootStyle.getPropertyValue( \"--light-blue\" );\r\n\t\t\tbreak;\r\n\t\tcase type.fourth:\r\n\t\t\tplayerWonLost.classList.remove( 'not-show-element' );\r\n\t\t\tplayerWonLost.querySelector( '.player-number' )\r\n\t\t\t\t.textContent = \"2\";\r\n\t\t\ticonContainer.setAttribute( 'class', 'msg-background-o' );\r\n\t\t\ttakesRound.classList.remove( 'not-show-element' );\r\n\t\t\ttakesRound.style.color = cssRootStyle.getPropertyValue( \"--light-yellow\" );\r\n\t\t\tbreak;\r\n\t\tcase type.fifth:\r\n\t\t\twon.classList.remove( 'not-show-element' );\r\n\t\t\ticonContainer.setAttribute( \"class\", \"msg-background-x\" );\r\n\t\t\ttakesRound.classList.remove( 'not-show-element' );\r\n\t\t\ttakesRound.style.color = cssRootStyle.getPropertyValue( \"--light-blue\" );\r\n\t\t\tbreak;\r\n\t\tcase type.sixth:\r\n\t\t\twon.classList.remove( 'not-show-element' );\r\n\t\t\ticonContainer.setAttribute( 'class', 'msg-background-o' );\r\n\t\t\ttakesRound.classList.remove( 'not-show-element' );\r\n\t\t\ttakesRound.style.color = cssRootStyle.getPropertyValue( \"--light-yellow\" );\r\n\t\t\tbreak;\r\n\t\tcase type.seventh:\r\n\t\t\tlost.classList.remove( 'not-show-element' );\r\n\t\t\ticonContainer.setAttribute( \"class\", \"msg-background-x\" );\r\n\t\t\ttakesRound.classList.remove( 'not-show-element' );\r\n\t\t\ttakesRound.style.color = cssRootStyle.getPropertyValue( \"--light-blue\" );\r\n\t\t\tbreak;\r\n\t\tcase type.eighth:\r\n\t\t\tlost.classList.remove( 'not-show-element' );\r\n\t\t\ticonContainer.setAttribute( 'class', 'msg-background-o' );\r\n\t\t\ttakesRound.classList.remove( 'not-show-element' );\r\n\t\t\ttakesRound.style.color = cssRootStyle.getPropertyValue( \"--light-yellow\" );\r\n\t\t\tbreak;\r\n\t\tcase type.nineth:\r\n\t\t\ticonContainer.setAttribute( \"class\", 'not-show-element' );\r\n\t\t\trestart.classList.remove( 'not-show-element' );\r\n\t\t\tbreak;\r\n\t\tcase type.tenth:\r\n\t\t\ticonContainer.setAttribute( \"class\", 'not-show-element' );\r\n\t\t\ttied.classList.remove( 'not-show-element' );\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tif ( kind === type.nineth ) {\r\n\t\t\tquitCancelBtn.classList.replace( 'quit-btn', 'quit-resize' );\r\n\t\t\troundRestartBtn.classList.replace(\r\n\t\t\t\t'nextround-restart-btn',\r\n\t\t\t\t'next-round-resize'\r\n\t\t\t);\r\n\t\t\tquitCancelBtn.querySelector( 'span' )\r\n\t\t\t\t.textContent = 'no, cancel';\r\n\t\t\troundRestartBtn.querySelector( 'span' )\r\n\t\t\t\t.textContent =\r\n\t\t\t\t'yes, restart';\r\n\t\t} else {\r\n\t\t\tquitCancelBtn.classList.replace( 'quit-resize', 'quit-btn' );\r\n\t\t\troundRestartBtn.classList.replace(\r\n\t\t\t\t'next-round-resize',\r\n\t\t\t\t'nextround-restart-btn'\r\n\t\t\t);\r\n\t\t\tquitCancelBtn.querySelector( 'span' )\r\n\t\t\t\t.textContent = 'quit';\r\n\t\t\troundRestartBtn.querySelector( 'span' )\r\n\t\t\t\t.textContent = 'next round';\r\n\t\t};\r\n\t\tdialogBox.setAttribute( \"data-type\", kind );\r\n\t}\r\n}\r\n\r\nfunction Dialog() {};\r\n\r\nDialog.prototype = dialogPrototype;\r\nDialog.prototype.constructor = Dialog;\r\n\r\n// ============================================================================\r\n// --------------------------------FUNCTIONS-----------------------------------\r\n// ============================================================================\r\n\r\nfunction restartNewRound() {\r\n\tcellsGrid.resetGrid();\r\n\tturn.reset();\r\n\tplayer1.reset();\r\n\tplayer2.reset();\r\n\tif ( player2.name === \"CPU\" ) {\r\n\t\tcomputer.initialize();\r\n\t}\r\n\trestartBtn.setAttribute( \"disabled\", \"\" );\r\n\tpopulateStorage();\r\n\tif ( player2.mark === \"x\" && player2.name === 'CPU' ) {\r\n\t\tlet computerMove = computer.chooseMove();\r\n\t\tplayer2.generateClick( computerMove );\r\n\t}\r\n}\r\n\r\nfunction cellsCreator() {\r\n\tlet cellsArray = [ 0, 0, 0, 0, 0, 0, 0, 0, 0 ];\r\n\tlet cellPosition;\r\n\tfor ( [ cellElementKey, cellElement ] of cellElements.entries() ) {\r\n\t\tvar cell = new Cell( cellElement.id, cellElement );\r\n\t\tcellPosition = Number( cellElement.id ) - 1;\r\n\t\tcellsArray.splice( cellPosition, 1, cell );\r\n\t}\r\n\treturn cellsArray\r\n};\r\n\r\n// ------------------------------session storage functions----------------------\r\nfunction populateStorage() {\r\n\r\n\t// HTML\r\n\t// new Game\r\n\tnewGameClass = newGame.getAttribute( \"class\" );\r\n\tsessionStorage.setItem( \"new-game\", newGameClass );\r\n\txChoiceButtonClass = markBtnX.getAttribute( \"class\" );\r\n\toChoiceButtonClass = markBtnO.getAttribute( \"class\" );\r\n\tsessionStorage.setItem( \"x-choice-button\", xChoiceButtonClass );\r\n\tsessionStorage.setItem( \"o-choice-button\", oChoiceButtonClass );\r\n\r\n\t// start\r\n\tstartClass = start.getAttribute( \"class\" );\r\n\tsessionStorage.setItem( \"start\", startClass );\r\n\tturnIconXClass = turnIconX.getAttribute( \"class\" );\r\n\tturnIconOClass = turnIconO.getAttribute( \"class\" );\r\n\tsessionStorage.setItem( \"turnIconX\", turnIconXClass );\r\n\tsessionStorage.setItem( \"turnIconO\", turnIconOClass );\r\n\trestartBtnClass = restartBtn.getAttribute( \"class\" );\r\n\tsessionStorage.setItem( \"restart-btn\", restartBtnClass );\r\n\tcellsClass = {};\r\n\tfor ( cell of cells ) {\r\n\t\tif ( cell ) {\r\n\t\t\tcellsClass[ cell.id ] = document.getElementById( cell.id )\r\n\t\t\t\t.getAttribute( \"class\" );\r\n\t\t}\r\n\t}\r\n\tsessionStorage.setItem( \"cellsClassObj\", JSON.stringify( cellsClass ) );\r\n\r\n\txScoreContent = {\r\n\t\txScorePlayer: xScore.querySelector( \"p\" )\r\n\t\t\t.innerHTML,\r\n\t\txScoreScore: xScore.querySelector( \"h4\" )\r\n\t\t\t.innerHTML\r\n\t};\r\n\toScoreContent = {\r\n\t\toScorePlayer: oScore.querySelector( \"p\" )\r\n\t\t\t.innerHTML,\r\n\t\toScoreScore: oScore.querySelector( \"h4\" )\r\n\t\t\t.innerHTML\r\n\t};\r\n\ttieContent = tie.querySelector( \"h4\" )\r\n\t\t.textContent;\r\n\tsessionStorage.setItem( \"xScoreContentObj\", JSON.stringify( xScoreContent ) );\r\n\tsessionStorage.setItem( \"oScoreContentObj\", JSON.stringify( oScoreContent ) );\r\n\tsessionStorage.setItem( \"tieContent\", tieContent );\r\n\r\n\t// GETTING JAVASCRIPT OBJECTS\r\n\tmarkObj = mark.getProperties;\r\n\tturnObj = turn.getProperties;\r\n\tplayer1Obj = player1.getProperties;\r\n\tplayer2Obj = player2.getProperties;\r\n\tcellObjs.length = 0;\r\n\tfor ( cell of cells ) {\r\n\t\tcellObjs.push( cell.getProperties )\r\n\t}\r\n\tcellsGridObj = cellsGrid.getProperties;\r\n\tcomputerObj = computer.getProperties;\r\n\r\n\tsessionStorage.setItem( \"mark\", JSON.stringify( markObj ) );\r\n\tsessionStorage.setItem( \"turn\", JSON.stringify( turnObj ) );\r\n\tsessionStorage.setItem( \"player1\", JSON.stringify( player1Obj ) );\r\n\tsessionStorage.setItem( \"player2\", JSON.stringify( player2Obj ) );\r\n\tsessionStorage.setItem( \"cells\", JSON.stringify( cellObjs ) );\r\n\tsessionStorage.setItem( \"cellsGrid\", JSON.stringify( cellsGridObj ) );\r\n\tsessionStorage.setItem( \"computer\", JSON.stringify( computerObj ) );\r\n}\r\n\r\nfunction populateDialogStorage() {\r\n\tvar dialogBoxObj = {\r\n\t\tdialogBoxOpen: dialogBox.hasAttribute( \"open\" ),\r\n\t\ttype: dialogBox.dataset.type\r\n\t};\r\n\tsessionStorage.setItem( \"dialogBoxStyle\", JSON.stringify( dialogBoxObj ) );\r\n}\r\n\r\nfunction setStyle() {\r\n\t// new game\r\n\tnewGameClass = sessionStorage.getItem( \"new-game\" );\r\n\tnewGame.setAttribute( \"class\", newGameClass );\r\n\txChoiceButtonClass = sessionStorage.getItem( \"x-choice-button\" );\r\n\tmarkBtnX.setAttribute( \"class\", xChoiceButtonClass );\r\n\toChoiceButtonClass = sessionStorage.getItem( \"o-choice-button\" );\r\n\tmarkBtnO.setAttribute( \"class\", oChoiceButtonClass );\r\n\r\n\t// start\r\n\tstartClass = sessionStorage.getItem( \"start\" );\r\n\tstart.setAttribute( \"class\", startClass );\r\n\tturnIconXClass = sessionStorage.getItem( \"turnIconX\" );\r\n\tturnIconX.setAttribute( \"class\", turnIconXClass );\r\n\tturnIconOClass = sessionStorage.getItem( \"turnIconO\" );\r\n\tturnIconO.setAttribute( \"class\", turnIconOClass );\r\n\trestartBtnClass = sessionStorage.getItem( \"restart-btn\" );\r\n\trestartBtn.setAttribute( \"class\", restartBtnClass );\r\n\tcellsClass = JSON.parse( sessionStorage.getItem( \"cellsClassObj\" ) );\r\n\tif ( cellsClass ) {\r\n\t\tfor ( [ key, value ] of Object.entries( cellsClass ) ) {\r\n\t\t\tdocument.getElementById( key )\r\n\t\t\t\t.setAttribute( 'class', value );\r\n\t\t}\r\n\t}\r\n\txScoreContent = JSON.parse( sessionStorage.getItem( \"xScoreContentObj\" ) );\r\n\toScoreContent = JSON.parse( sessionStorage.getItem( \"oScoreContentObj\" ) );\r\n\ttieContent = sessionStorage.getItem( \"tieContent\" );\r\n\txScore.querySelector( \"p\" )\r\n\t\t.innerHTML = xScoreContent.xScorePlayer;\r\n\txScore.querySelector( \"h4\" )\r\n\t\t.innerHTML = xScoreContent.xScoreScore;\r\n\r\n\toScore.querySelector( \"p\" )\r\n\t\t.innerHTML = oScoreContent.oScorePlayer;\r\n\toScore.querySelector( \"h4\" )\r\n\t\t.innerHTML = oScoreContent.oScoreScore;\r\n\r\n\ttie.querySelector( \"h4\" )\r\n\t\t.textContent = tieContent;\r\n\r\n\t// DIALOG\r\n\tif ( sessionStorage.getItem( \"dialogBoxStyle\" ) ) {\r\n\t\tvar dialogBoxObj = JSON.parse( sessionStorage.getItem( \"dialogBoxStyle\" ) );\r\n\t\tif ( dialogBoxObj.dialogBoxOpen ) {\r\n\t\t\tdialog.show();\r\n\t\t\tdialog.configure( dialogBoxObj.type );\r\n\t\t}\r\n\t}\r\n\t// JAVASCRIPT\r\n\tmarkObj = JSON.parse( sessionStorage.getItem( \"mark\" ) );\r\n\tturnObj = JSON.parse( sessionStorage.getItem( \"turn\" ) );\r\n\tplayer1Obj = JSON.parse( sessionStorage.getItem( \"player1\" ) );\r\n\tplayer2Obj = JSON.parse( sessionStorage.getItem( \"player2\" ) );\r\n\tcellObjs = JSON.parse( sessionStorage.getItem( 'cells' ) );\r\n\tcellsGridObj = JSON.parse( sessionStorage.getItem( \"cellsGrid\" ) );\r\n\tcomputerObj = JSON.parse( sessionStorage.getItem( \"computer\" ) );\r\n\r\n\tmark.setProperties = markObj;\r\n\tturn.setProperties = turnObj;\r\n\tplayer1.setProperties = player1Obj;\r\n\tplayer2.setProperties = player2Obj;\r\n\tcells.forEach( ( cell, index ) => {\r\n\t\tcell.setProperties = cellObjs[ index ];\r\n\t} );\r\n\tcellsGrid.setProperties = cellsGridObj\r\n\tcellsGrid.addAllCellsClickEvent();\r\n\tcomputer.setProperties = computerObj;\r\n}\r\n\r\n// ============================================================================\r\n//---------------------------CREATING OBJECTS ---------------------------------\r\n// ============================================================================\r\n// creating mark object\r\nconst mark = new Mark();\r\n// creating player objects\r\nconst player1 = new Player();\r\nconst player2 = new Player();\r\nconst computer = new Computer();\r\n// creating Turn OBJECT\r\nconst turn = new Turn();\r\n//Arrays of cell\r\nconst cells = cellsCreator();\r\n// creating cellsGrid OBJECT to group and manage the cells all\r\nconst cellsGrid = new CellsGrid();\r\n// creating dialog Object\r\nconst dialog = new Dialog();\r\n// ============================================================================\r\n// --------------------------------------EVENTS--------------------------------\r\n// ============================================================================\r\n// Buttons\r\n//adding event to choose the player1's mark\r\nfor ( let button of [ markBtnX, markBtnO ] ) {\r\n\tbutton.addEventListener( 'click', () => {\r\n\t\tmark.switch();\r\n\t\tpopulateStorage();\r\n\t} );\r\n}\r\nplayerVsPlayerButton.addEventListener( 'click', function () {\r\n\t// initializing player objects\r\n\tplayer1.mark = mark.p1Mark;\r\n\tplayer1.name = 'P1';\r\n\tplayer2.mark = mark.p2Mark;\r\n\tplayer2.name = 'P2';\r\n\tplayer1.initializeScore();\r\n\tplayer2.initializeScore();\r\n\tnewGame.classList.add( 'not-show-element' );\r\n\tstart.classList.remove( 'not-show-element' );\r\n\tcellsGrid.init();\r\n\tpopulateStorage();\r\n} );\r\ncpuVsPlayerButton.addEventListener( \"click\", function () {\r\n\tplayer1.mark = mark.p1Mark;\r\n\tplayer1.name = \"P1\";\r\n\tplayer2.mark = mark.p2Mark;\r\n\tplayer2.name = \"CPU\";\r\n\tplayer1.initializeScore();\r\n\tplayer2.initializeScore();\r\n\tnewGame.classList.add( 'not-show-element' );\r\n\tstart.classList.remove( 'not-show-element' );\r\n\tcellsGrid.init();\r\n\tcomputer.initialize();\r\n\tif ( player2.mark === \"x\" ) {\r\n\t\tlet computerMove = computer.chooseMove();\r\n\t\tplayer2.generateClick( computerMove );\r\n\t}\r\n\tpopulateStorage();\r\n} );\r\n\r\n// dialog events\r\nquitCancelBtn.addEventListener( \"click\", ( e ) => {\r\n\tif ( e.target.textContent.toLowerCase() === \"quit\" ) {\r\n\t\t// reload the page without creating a history entry\r\n\t\tsessionStorage.clear();\r\n\t\twindow.location.reload();\r\n\t} else {\r\n\t\tdialog.reset();\r\n\t\tdialog.close();\r\n\t\tpopulateDialogStorage();\r\n\t}\r\n} );\r\nroundRestartBtn.addEventListener( \"click\", () => {\r\n\trestartNewRound();\r\n\tdialog.reset();\r\n\tdialog.close();\r\n\tpopulateDialogStorage();\r\n} );\r\nrestartBtn.addEventListener( \"click\", () => {\r\n\tdialog.configure( \"restart\" )\r\n\tdialog.show();\r\n\tpopulateDialogStorage();\r\n} );\r\n\r\ndialogBox.addEventListener( \"submit\", ( e ) => {\r\n\te.preventDefault();\r\n} );\r\n\r\n//session storage events\r\nwindow.addEventListener( \"load\", () => {\r\n\tif ( sessionStorage.length ) {\r\n\t\tsetStyle();\r\n\t}\r\n} );"]}