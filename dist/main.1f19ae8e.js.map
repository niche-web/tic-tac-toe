{"version":3,"sources":["main.js","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["COMBINATIONS_MATRIX","POSSIBLE_PLAYS","newGame","document","querySelector","markBtnO","markBtnX","start","cellElements","querySelectorAll","turnIconX","turnIconO","xScore","getElementById","oScore","tie","dialogBox","cssRoot","cssRootStyle","getComputedStyle","playerVsPlayerButton","cpuVsPlayerButton","restartBtn","playerWonLost","won","lost","iconContainer","takesRound","restart","tied","quitCancelBtn","roundRestartBtn","type","first","second","third","fourth","fifth","sixth","seventh","eighth","nineth","tenth","markObj","turnObj","player1Obj","player2Obj","cellsGridObj","computerObj","xScoreContent","oScoreContent","newGameClass","xChoiceButtonClass","oChoiceButtonClass","startClass","turnIconXClass","turnIconOClass","restartBtnClass","cellsClass","tieContent","cellObjs","markPrototype","updateMark","classList","contains","p1Mark","p2Mark","switch","toggle","getProperties","obj","setProperties","Mark","prototype","constructor","playerPrototype","updateScore","scoreString","score","toString","mark","textContent","initializeScore","scoreCell","name","generateClick","id","player2","cellsGrid","totalClicks","click","reset","track","Player","turnPrototype","thirdRecipe","currentTurn","previousTurn","show","markPrevious","markCurrent","remove","add","Turn","cellPrototype","markAsWinner","marked","addClickEvent","clickEventHandler","bind","addEventListener","removeClickEvent","removeEventListener","resetCell","resetCellBackground","removeAttribute","showCellMark","Cell","event","stopPropagation","preventDefault","allCellsId","includes","currentTarget","turn","clickCentinel","playerName","computer","anotate","populateStorage","isItMyTurn","computerMove","chooseMove","cellsGridPrototype","addAllCellsClickEvent","cells","cell","removeCellsClick","init","cellId","push","cellIdNumber","Number","player1","combinations","forEach","e","i","tiesTrack","result","winnerCentinel","player1TrackIndex","findIndex","x","player2TrackIndex","tiedGame","cellsId","summary","tiesScore","winnerData","markWinnerCells","UpdateScore","showDialog","populateDialogStorage","player","tieScoreSlot","configurePoppupDialog","resetGrid","cellElement","cellsIds","pos","CellsGrid","computerPrototype","initialize","possiblePlays","JSON","parse","stringify","cellClicked","length","index","splice","iHaveWinningMove","haveIWinningMove","playerHaveWinningMove","havePWinningMove","playerHaveHalfEmptyCombs","havePHalfEmptyCombs","playerHaveEmptyCombs","havePEmptyCombs","element","takeFirstOpt","indexToReturn","arr","Computer","kind","style","color","getPropertyValue","ye","replace","setAttribute","resetDialog","dialogElemList","entries","key","entrie","restartNewRound","cellsCreator","cellsArray","cellPosition","cellElementKey","getAttribute","sessionStorage","setItem","xScorePlayer","innerHTML","xScoreScore","oScorePlayer","oScoreScore","dialogBoxObj","dialogBoxOpen","hasAttribute","dataset","setStyle","getItem","Object","value","button","target","toLowerCase","clear","window","location","reload","close","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","console","hmrApply","v","hmrAcceptRun","onclose","log","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","body","appendChild","createElement","stackTrace","innerText","getParents","modules","parents","k","d","dep","Array","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"main.1f19ae8e.js","sourceRoot":"..\\src","sourcesContent":["// ============================================================================\r\n// ---------------------------------CONSTS-------------------------------------\r\n// ============================================================================\r\nconst COMBINATIONS_MATRIX = [\r\n\t[ 1, 5, 9 ],\r\n\t[ 1, 6, 8 ],\r\n\t[ 2, 4, 9 ],\r\n\t[ 2, 5, 8 ],\r\n\t[ 2, 6, 7 ],\r\n\t[ 3, 4, 8 ],\r\n\t[ 3, 5, 7 ],\r\n\t[ 4, 5, 6 ]\r\n];\r\nconst POSSIBLE_PLAYS = [ 5, 2, 4, 6, 8, 1, 3, 7, 9 ];\r\n\r\n// DOM INTIALIZING\r\n// page new game\r\nconst newGame = document.querySelector( '#new-game' );\r\n// choice buttons\r\nconst markBtnO = document.querySelector( '#o-choice-button' );\r\nconst markBtnX = document.querySelector( '#x-choice-button' );\r\n\r\n// page start\r\nconst start = document.querySelector( '#start' );\r\nconst cellElements = document.querySelectorAll( \"#start #cells > div\" );\r\nconst turnIconX = document.querySelector( '.turn .icon-x' );\r\nconst turnIconO = document.querySelector( '.turn .icon-o' );\r\nconst xScore = document.getElementById( \"x-score\" );\r\nconst oScore = document.getElementById( \"o-score\" );\r\nconst tie = document.getElementById( \"ties\" );\r\n\r\n// dialog page\r\nconst dialogBox = document.querySelector( \"#dialog-box\" );\r\n\r\n// CSS Variables\r\nconst cssRoot = document.querySelector( \":root\" );\r\nconst cssRootStyle = getComputedStyle( cssRoot );\r\n\r\n// BUTTONS\r\nlet playerVsPlayerButton = document.querySelector(\r\n\t'#player1-vs-player2-button'\r\n);\r\nconst cpuVsPlayerButton = document.querySelector( \"#cpu-vs-player-button\" );\r\nconst restartBtn = document.getElementById( \"restart-button\" );\r\n\r\n// dialog initializing\r\n// head\r\nconst playerWonLost = document.querySelector( '#dialog-box #player-won-lost' );\r\nconst won = document.querySelector( '#dialog-box #won' );\r\nconst lost = document.querySelector( '#dialog-box #lost' );\r\n// main take a round\r\nconst iconContainer = document.querySelector( \"#msg-body .icon-container\" );\r\nconst takesRound = document.querySelector( '#dialog-box #takes-round' );\r\n// main Restart and Tied\r\nconst restart = document.querySelector( '#dialog-box #restart' );\r\nconst tied = document.querySelector( '#dialog-box #tied' );\r\n// foot\r\nconst quitCancelBtn = document.querySelector( '#dialog-box footer #quit-cancel' );\r\nconst roundRestartBtn = document.querySelector(\r\n\t'#dialog-box footer #round-restart' );\r\n\r\nconst type = {\r\n\tfirst: 'player1-X',\r\n\tsecond: 'player1-O',\r\n\tthird: 'player2-X',\r\n\tfourth: 'player2-O',\r\n\tfifth: 'won-X',\r\n\tsixth: 'won-O',\r\n\tseventh: 'lost-X',\r\n\teighth: 'lost-O',\r\n\tnineth: 'restart',\r\n\ttenth: 'tied',\r\n};\r\n// to sessionStorage use\r\nlet markObj, turnObj, player1Obj, player2Obj, cellsGridObj, computerObj, xScoreContent, oScoreContent;\r\nlet newGameClass, xChoiceButtonClass, oChoiceButtonClass, startClass, turnIconXClass, turnIconOClass, restartBtnClass, cellsClass, tieContent;\r\nlet cellObjs = [];\r\n// =============================================================================\r\n// -------------------------------------OBJECTS---------------------------------\r\n// =============================================================================\r\n// MARK OBJECT\r\nlet markPrototype = {\r\n\tupdateMark() {\r\n\t\tif ( markBtnX.classList.contains( 'active-mark-button' ) ) {\r\n\t\t\tthis.p1Mark = 'x';\r\n\t\t\tthis.p2Mark = 'o';\r\n\t\t} else {\r\n\t\t\tthis.p2Mark = 'x';\r\n\t\t\tthis.p1Mark = 'o';\r\n\t\t}\r\n\t},\r\n\tswitch () {\r\n\t\tmarkBtnX.classList.toggle( 'active-mark-button' );\r\n\t\tmarkBtnO.classList.toggle( 'active-mark-button' );\r\n\t\tthis.updateMark();\r\n\t},\r\n\tget getProperties() {\r\n\t\tlet obj = {\r\n\t\t\tp1Mark: this.p1Mark,\r\n\t\t\tp2Mark: this.p2Mark\r\n\t\t}\r\n\t\treturn obj;\r\n\t},\r\n\tset setProperties( obj ) {\r\n\t\tthis.p1Mark = obj.p1Mark;\r\n\t\tthis.p2Mark = obj.p2Mark;\r\n\t}\r\n};\r\n// Mark constructor function\r\nfunction Mark() {\r\n\tthis.p1Mark = 'x';\r\n\tthis.p2Mark = 'o';\r\n}\r\nMark.prototype = markPrototype;\r\nMark.prototype.constructor = Mark;\r\n// PLAYER OBJECT\r\nlet playerPrototype = {\r\n\tupdateScore() {\r\n\t\tlet scoreString = this.score.toString();\r\n\t\tif ( this.score < 10 ) {\r\n\t\t\tscoreString = '0' + scoreString;\r\n\t\t}\r\n\t\tif ( this.mark === \"x\" ) {\r\n\t\t\txScore.querySelector( '.score' )\r\n\t\t\t\t.textContent = scoreString;\r\n\t\t} else {\r\n\t\t\toScore.querySelector( '.score' )\r\n\t\t\t\t.textContent = scoreString;\r\n\t\t}\r\n\r\n\t},\r\n\tinitializeScore() {\r\n\t\tif ( this.mark === 'x' ) {\r\n\t\t\tthis.scoreCell = xScore;\r\n\t\t} else {\r\n\t\t\tthis.scoreCell = oScore;\r\n\t\t}\r\n\t\tthis.scoreCell.querySelector( 'p span' )\r\n\t\t\t.textContent = this.name;\r\n\t},\r\n\t//For CPU user\r\n\tgenerateClick( id ) {\r\n\t\tif ( player2.name === \"CPU\" && cellsGrid.totalClicks < 9 ) {\r\n\t\t\tdocument.getElementById( `${id}` )\r\n\t\t\t\t.click();\r\n\t\t}\r\n\t},\r\n\treset() {\r\n\t\tthis.track = [ 0, 0, 0, 0, 0, 0, 0, 0 ];\r\n\t},\r\n\tget getProperties() {\r\n\t\tlet obj = {\r\n\t\t\tmark: this.mark,\r\n\t\t\tname: this.name,\r\n\t\t\tscore: this.score,\r\n\t\t\ttrack: this.track\r\n\t\t}\r\n\t\treturn obj;\r\n\t},\r\n\tset setProperties( obj ) {\r\n\t\tthis.mark = obj.mark;\r\n\t\tthis.name = obj.name;\r\n\t\tthis.score = obj.score;\r\n\t\tthis.track = obj.track;\r\n\t}\r\n};\r\n\r\nfunction Player() {\r\n\tthis.mark = '';\r\n\tthis.name = '';\r\n\tthis.score = 0;\r\n\tthis.scoreCell = {};\r\n\tthis.track = [ 0, 0, 0, 0, 0, 0, 0, 0 ]\r\n}\r\n\r\nPlayer.prototype = playerPrototype;\r\nPlayer.prototype.constructor = Player;\r\n\r\n// TURN OBJECT\r\nlet turnPrototype = {\r\n\tswitch () {\r\n\t\tlet thirdRecipe;\r\n\t\tthirdRecipe = this.currentTurn;\r\n\t\tthis.currentTurn = this.previousTurn;\r\n\t\tthis.previousTurn = thirdRecipe;\r\n\t\tthis.show();\r\n\t},\r\n\tshow() {\r\n\t\tlet markPrevious = this.previousTurn;\r\n\t\tlet markCurrent = this.currentTurn;\r\n\t\tturnIconO.classList.remove( 'not-show-element' );\r\n\t\tturnIconX.classList.add( 'not-show-element' );\r\n\t\tif ( markCurrent === \"x\" ) {\r\n\t\t\tturnIconX.classList.remove( 'not-show-element' );\r\n\t\t\tturnIconO.classList.add( 'not-show-element' );\r\n\t\t}\r\n\r\n\t},\r\n\treset() {\r\n\t\tthis.currentTurn = 'x';\r\n\t\tthis.previousTurn = 'o';\r\n\t\tthis.show();\r\n\t},\r\n\tget getProperties() {\r\n\t\tlet obj = {\r\n\t\t\tcurrentTurn: this.currentTurn,\r\n\t\t\tpreviousTurn: this.previousTurn\r\n\t\t}\r\n\t\treturn obj;\r\n\t},\r\n\tset setProperties( obj ) {\r\n\t\tthis.currentTurn = obj.currentTurn;\r\n\t\tthis.previousTurn = obj.previousTurn;\r\n\t}\r\n};\r\n\r\nfunction Turn() {\r\n\tthis.currentTurn = 'x';\r\n\tthis.previousTurn = 'o';\r\n}\r\nTurn.prototype = turnPrototype;\r\nTurn.prototype.constructor = Turn;\r\n\r\n// CELL OBJECT\r\nconst cellPrototype = {\r\n\tmarkAsWinner() {\r\n\t\tdocument.getElementById( this.id )\r\n\t\t\t.classList.add( `cell-background-win-${this.marked}` )\r\n\t},\r\n\r\n\taddClickEvent() {\r\n\t\tthis.clickEventHandler = this.clickEventHandler.bind( this );\r\n\t\tif ( !this.marked ) {\r\n\t\t\tdocument.getElementById( this.id )\r\n\t\t\t\t.addEventListener( \"click\", this.clickEventHandler, false );\r\n\t\t}\r\n\r\n\t},\r\n\tremoveClickEvent() {\r\n\t\tdocument.getElementById( this.id )\r\n\t\t\t.removeEventListener( \"click\", this.clickEventHandler, false );\r\n\t},\r\n\tresetCell() {\r\n\t\tthis.marked = \"\";\r\n\t\tthis.addClickEvent();\r\n\t\tthis.resetCellBackground();\r\n\t},\r\n\tresetCellBackground() {\r\n\t\tdocument.getElementById( this.id )\r\n\t\t\t.removeAttribute( \"class\" );\r\n\t},\r\n\tshowCellMark( mark ) {\r\n\t\tdocument.getElementById( this.id )\r\n\t\t\t.classList.add( `cell-background-${this.marked}` );\r\n\r\n\t},\r\n\tget getProperties() {\r\n\t\tlet obj = {\r\n\t\t\tmarked: this.marked,\r\n\t\t\tid: this.id\r\n\t\t}\r\n\t\treturn obj;\r\n\t},\r\n\tset setProperties( obj ) {\r\n\t\tthis.marked = obj.marked;\r\n\t\tthis.id = obj.id;\r\n\t}\r\n};\r\n\r\nfunction Cell( id ) {\r\n\tthis.marked = \"\";\r\n\tthis.id = id;\r\n\tthis.clickEventHandler = function ( event ) {\r\n\t\tevent.stopPropagation();\r\n\t\tevent.preventDefault();\r\n\t\t// Using this if-statement to fix the clicking twice bug\r\n\t\tif ( !cellsGrid.allCellsId.includes( event.currentTarget.id ) ) {\r\n\t\t\tthis.marked = turn.currentTurn;\r\n\t\t\trestartBtn.removeAttribute( \"disabled\" );\r\n\t\t\tthis.showCellMark();\r\n\t\t\tcellsGrid.clickCentinel( this.marked, this.playerName, this.id )\r\n\t\t\tthis.removeClickEvent();\r\n\t\t\tif ( player2.name === \"CPU\" ) {\r\n\t\t\t\tcomputer.anotate();\r\n\t\t\t}\r\n\t\t\tturn.switch();\r\n\t\t\tpopulateStorage();\r\n\t\t\t// managing computer move\r\n\t\t\tif ( player2.name === \"CPU\" ) {\r\n\t\t\t\tif ( computer.isItMyTurn() ) {\r\n\t\t\t\t\tlet computerMove = computer.chooseMove();\r\n\t\t\t\t\tplayer2.generateClick( computerMove );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\nCell.prototype = cellPrototype;\r\nCell.prototype.constructor = Cell;\r\n\r\n// CELLSGRID OBJECT\r\nconst cellsGridPrototype = {\r\n\r\n\taddAllCellsClickEvent() {\r\n\t\tfor ( cell of cells ) {\r\n\t\t\tcell.addClickEvent();\r\n\t\t}\r\n\t},\r\n\r\n\tremoveCellsClick() {\r\n\t\tfor ( cell of cells ) {\r\n\t\t\tcell.removeClickEvent();\r\n\t\t}\r\n\t},\r\n\r\n\tinit() {\r\n\t\tthis.addAllCellsClickEvent();\r\n\t},\r\n\r\n\tclickCentinel( mark, name, cellId ) {\r\n\t\tthis.totalClicks++\r\n\t\tthis.allCellsId.push( cellId );\r\n\t\tvar cellIdNumber = Number( cellId );\r\n\t\t// update players track arrays\r\n\t\tif ( mark === player1.mark ) {\r\n\t\t\tthis.combinations.forEach( ( e, i ) => {\r\n\t\t\t\tif ( e.includes( cellIdNumber ) ) {\r\n\t\t\t\t\tplayer1.track[ i ]++;\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t} else if ( mark === player2.mark ) {\r\n\t\t\tthis.combinations.forEach( ( e, i ) => {\r\n\t\t\t\tif ( e.includes( cellIdNumber ) ) {\r\n\t\t\t\t\tplayer2.track[ i ]++;\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t}\r\n\t\tthis.tiesTrack = () => {\r\n\t\t\tlet result = [];\r\n\t\t\tfor ( let i = 0; i < 8; i++ ) {\r\n\t\t\t\tresult.push( player1.track[ i ] * player2.track[ i ] )\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tthis.winnerCentinel();\r\n\t},\r\n\r\n\twinnerCentinel() {\r\n\t\tlet player1TrackIndex = player1.track.includes( 3 ) ?\r\n\t\t\tplayer1.track.findIndex( ( x ) => x === 3 ) : false;\r\n\r\n\t\tlet player2TrackIndex = player2.track.includes( 3 ) ?\r\n\t\t\tplayer2.track.findIndex( ( x ) => x === 3 ) : false;\r\n\r\n\t\tlet tiedGame = !this.tiesTrack()\r\n\t\t\t.includes( 0 );\r\n\r\n\t\tif ( player1TrackIndex || player1TrackIndex === 0 ) {\r\n\t\t\tthis.won.playerName = player1.name;\r\n\t\t\tthis.won.mark = player1.mark;\r\n\t\t\tthis.won.cellsId = this.combinations[ player1TrackIndex ];\r\n\t\t\tplayer1.score++;\r\n\t\t\tthis.summary( this.won )\r\n\t\t\treturn;\r\n\t\t} else if ( player2TrackIndex || player2TrackIndex === 0 ) {\r\n\t\t\tthis.won.playerName = player2.name;\r\n\t\t\tthis.won.mark = player2.mark;\r\n\t\t\tthis.won.cellsId = this.combinations[ player2TrackIndex ];\r\n\t\t\tplayer2.score++;\r\n\t\t\tthis.summary( this.won );\r\n\t\t\treturn;\r\n\t\t} else if ( tiedGame ) {\r\n\t\t\tthis.tiesScore++\r\n\t\t\tthis.won.playerName = \"none\";\r\n\t\t\tthis.summary( this.won );\r\n\t\t\treturn;\r\n\t\t}\r\n\t},\r\n\r\n\tsummary( winnerData ) {\r\n\t\tthis.markWinnerCells( this.won.cellsId );\r\n\t\tthis.UpdateScore();\r\n\t\tthis.removeCellsClick();\r\n\t\tdialogBox.show();\r\n\t\tthis.showDialog();\r\n\t\tpopulateDialogStorage();\r\n\t},\r\n\r\n\tUpdateScore() {\r\n\t\tlet player = this.won.playerName;\r\n\t\tswitch ( player ) {\r\n\t\tcase player1.name:\r\n\t\t\tplayer1.updateScore();\r\n\t\t\tbreak;\r\n\t\tcase player2.name:\r\n\t\t\tplayer2.updateScore();\r\n\t\t\tbreak;\r\n\t\tcase \"none\":\r\n\t\t\tlet tieScoreSlot = document.querySelector( \"#start #ties\" )\r\n\t\t\tlet scoreString = this.tiesScore.toString();\r\n\t\t\tif ( this.tiesScore < 10 ) {\r\n\t\t\t\tscoreString = '0' + scoreString;\r\n\t\t\t}\r\n\t\t\ttieScoreSlot.querySelector( '.score' )\r\n\t\t\t\t.textContent = scoreString;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\r\n\tshowDialog() {\r\n\t\tlet mark = this.won.mark;\r\n\t\tlet player = this.won.playerName;\r\n\t\tif ( player === \"none\" ) {\r\n\t\t\tconfigurePoppupDialog( \"tied\" );\r\n\t\t}\r\n\t\tswitch ( player ) {\r\n\t\tcase \"P1\":\r\n\t\t\tif ( mark === \"x\" ) {\r\n\t\t\t\tif ( player2.name === \"CPU\" ) {\r\n\t\t\t\t\tconfigurePoppupDialog( \"won-X\" );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconfigurePoppupDialog( \"player1-X\" );\r\n\t\t\t\t}\r\n\t\t\t} else if ( mark === \"o\" ) {\r\n\t\t\t\tif ( player2.name === \"CPU\" ) {\r\n\t\t\t\t\tconfigurePoppupDialog( \"won-O\" );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconfigurePoppupDialog( \"player1-O\" );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase \"P2\":\r\n\t\t\tif ( mark === \"x\" ) {\r\n\t\t\t\tconfigurePoppupDialog( \"player2-X\" );\r\n\t\t\t} else if ( mark === \"o\" ) {\r\n\t\t\t\tconfigurePoppupDialog( \"player2-O\" );\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase \"CPU\":\r\n\t\t\tif ( mark === \"x\" ) {\r\n\t\t\t\tconfigurePoppupDialog( \"lost-X\" );\r\n\t\t\t} else if ( mark === \"o\" ) {\r\n\t\t\t\tconfigurePoppupDialog( \"lost-O\" );\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\r\n\tresetGrid() {\r\n\t\tfor ( cellElement of cells ) {\r\n\t\t\tcellElement.resetCell();\r\n\t\t}\r\n\t\tthis.won.cellsId = [];\r\n\t\tthis.won.playerName = \"\";\r\n\t\tthis.won.mark = \"\";\r\n\t\tthis.totalClicks = 0;\r\n\t\tthis.allCellsId = [];\r\n\t\tthis.tiesTrack = [ 0, 0, 0, 0, 0, 0, 0, 0 ];\r\n\t},\r\n\r\n\tmarkWinnerCells( cellsIds ) {\r\n\t\tfor ( cellId of cellsIds ) {\r\n\t\t\tlet pos = cellId - 1;\r\n\t\t\tcells[ pos ].markAsWinner();\r\n\t\t}\r\n\t},\r\n\r\n\tget getProperties() {\r\n\t\tlet obj = {\r\n\t\t\twon: this.won,\r\n\t\t\ttotalClicks: this.totalClicks,\r\n\t\t\ttiesScore: this.tiesScore,\r\n\t\t\tallCellsId: this.allCellsId,\r\n\t\t\ttiesTrack: this.tiesTrack,\r\n\t\t}\r\n\t\treturn obj;\r\n\t},\r\n\r\n\tset setProperties( obj ) {\r\n\t\tthis.won = obj.won;\r\n\t\tthis.totalClicks = obj.totalClicks;\r\n\t\tthis.tiesScore = obj.tiesScore;\r\n\t\tthis.allCellsId = obj.allCellsId;\r\n\t\tthis.tiesTrack = obj.tiesTrack;\r\n\t}\r\n};\r\n\r\nfunction CellsGrid() {\r\n\tthis.won = {\r\n\t\tplayerName: \"\",\r\n\t\tcellsId: [],\r\n\t\tmark: \"\"\r\n\t};\r\n\tthis.totalClicks = 0;\r\n\tthis.tiesScore = 0;\r\n\tthis.allCellsId = [];\r\n\tthis.combinations = [\r\n\t\t[ 1, 5, 9 ],\r\n\t\t[ 1, 6, 8 ],\r\n\t\t[ 2, 4, 9 ],\r\n\t\t[ 2, 5, 8 ],\r\n\t\t[ 2, 6, 7 ],\r\n\t\t[ 3, 4, 8 ],\r\n\t\t[ 3, 5, 7 ],\r\n\t\t[ 4, 5, 6 ]\r\n\t];\r\n\tthis.tiesTrack = [ 0, 0, 0, 0, 0, 0, 0, 0 ];\r\n}\r\n\r\nCellsGrid.prototype = cellsGridPrototype;\r\nCellsGrid.prototype.constructor = CellsGrid;\r\n\r\n// COMPUTER OBJECT\r\ncomputerPrototype = {\r\n\tinitialize() {\r\n\t\tthis.possiblePlays = JSON.parse( JSON.stringify( POSSIBLE_PLAYS ) );\r\n\t},\r\n\tanotate() {\r\n\t\t// pop out the number clicked from the possible future moves\r\n\t\tlet cellClicked = Number( cellsGrid.allCellsId[ cellsGrid.allCellsId.length - 1 ] );\r\n\t\tvar index = this.possiblePlays.findIndex( ( x ) => x === cellClicked );\r\n\t\tthis.possiblePlays.splice( index, 1 );\r\n\t},\r\n\t// Analize the options and return the chosen move\r\n\tchooseMove() {\r\n\t\tvar iHaveWinningMove = this.haveIWinningMove();\r\n\t\tvar playerHaveWinningMove = this.havePWinningMove();\r\n\t\tvar playerHaveHalfEmptyCombs = this.havePHalfEmptyCombs();\r\n\t\tvar playerHaveEmptyCombs = this.havePEmptyCombs();\r\n\r\n\t\tif ( iHaveWinningMove || iHaveWinningMove === 0 ) {\r\n\r\n\t\t\tfor ( let element of this.possiblePlays ) {\r\n\t\t\t\tif ( cellsGrid.combinations[ iHaveWinningMove ].includes( element ) ) {\r\n\t\t\t\t\treturn element;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t} else if ( playerHaveWinningMove || playerHaveWinningMove === 0 ) {\r\n\r\n\t\t\tfor ( let element of this.possiblePlays ) {\r\n\t\t\t\tif ( cellsGrid.combinations[ playerHaveWinningMove ].includes( element ) ) {\r\n\t\t\t\t\treturn element;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t} else if ( playerHaveHalfEmptyCombs || playerHaveHalfEmptyCombs === 0 ) {\r\n\r\n\t\t\tfor ( let element of this.possiblePlays ) {\r\n\t\t\t\tif ( cellsGrid.combinations[ playerHaveHalfEmptyCombs ].includes( element ) ) {\r\n\t\t\t\t\treturn element;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t} else if ( playerHaveEmptyCombs || playerHaveEmptyCombs === 0 ) {\r\n\r\n\t\t\tfor ( let element of this.possiblePlays ) {\r\n\t\t\t\tif ( cellsGrid.combinations[ playerHaveEmptyCombs ].includes( element ) ) {\r\n\t\t\t\t\treturn element;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t} else if ( this.possiblePlays.length ) {\r\n\t\t\treturn computer.takeFirstOpt();\r\n\t\t}\r\n\t},\r\n\t// small tasks\r\n\tisItMyTurn() {\r\n\t\tif ( turn.currentTurn === player2.mark ) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\thaveIWinningMove() {\r\n\t\tvar indexToReturn = null;\r\n\t\tplayer2.track.forEach( ( element, index ) => {\r\n\t\t\tif ( element === 2 && player1.track[ index ] == 0 ) {\r\n\t\t\t\tindexToReturn = index;\r\n\t\t\t}\r\n\t\t} );\r\n\t\treturn indexToReturn;\r\n\t},\r\n\thavePWinningMove() {\r\n\t\tvar indexToReturn = null;\r\n\t\tplayer1.track.forEach( ( element, index ) => {\r\n\t\t\tif ( element === 2 && player2.track[ index ] === 0 ) {\r\n\t\t\t\tindexToReturn = index;\r\n\t\t\t}\r\n\t\t} );\r\n\t\treturn indexToReturn;\r\n\t},\r\n\thavePEmptyCombs() {\r\n\t\tvar indexToReturn = null;\r\n\t\tplayer1.track.forEach( ( element, index ) => {\r\n\t\t\tif ( element === 0 && player2.track[ index ] === 0 ) {\r\n\t\t\t\tindexToReturn = index;\r\n\t\t\t}\r\n\t\t} );\r\n\t\treturn indexToReturn;\r\n\t},\r\n\thavePHalfEmptyCombs() {\r\n\t\tvar indexToReturn = null;\r\n\t\tplayer1.track.forEach( ( element, index ) => {\r\n\t\t\tif ( element === 0 && player2.track[ index ] === 1 ) {\r\n\t\t\t\tindexToReturn = index;\r\n\t\t\t}\r\n\t\t} );\r\n\t\treturn indexToReturn;\r\n\t},\r\n\ttakeFirstOpt() {\r\n\t\treturn this.possiblePlays[ 0 ];\r\n\t},\r\n\tget getProperties() {\r\n\t\treturn this.possiblePlays;\r\n\t},\r\n\tset setProperties( arr ) {\r\n\t\tthis.possiblePlays = arr;\r\n\t}\r\n};\r\n\r\nfunction Computer() {\r\n\tthis.possiblePlays = [];\r\n}\r\n\r\nComputer.prototype = computerPrototype;\r\nComputer.prototype.constructor = Computer;\r\n\r\n\r\n// ============================================================================\r\n// --------------------------------FUNCTIONS-----------------------------------\r\n// ============================================================================\r\n// DIALOG\r\nfunction configurePoppupDialog( kind ) {\r\n\tswitch ( kind ) {\r\n\tcase type.first:\r\n\t\tplayerWonLost.classList.remove( 'not-show-element' );\r\n\t\tplayerWonLost.querySelector( '.player-number' )\r\n\t\t\t.textContent = \"1\";\r\n\t\ticonContainer.classList.add( \"msg-background-x\" )\r\n\t\ttakesRound.classList.remove( 'not-show-element' );\r\n\t\ttakesRound.style.color = cssRootStyle.getPropertyValue( \"--light-blue\" );\r\n\t\tbreak;\r\n\tcase type.second:\r\n\t\tplayerWonLost.classList.remove( 'not-show-element' );\r\n\t\tplayerWonLost.querySelector( '.player-number' )\r\n\t\t\t.textContent = \"1\";\r\n\t\ticonContainer.classList.add( 'msg-background-o' );\r\n\t\ttakesRound.classList.remove( 'not-show-element' );\r\n\t\ttakesRound.style.color = cssRootStyle.getPropertyValue( \"--light-yellow\" );\r\n\t\tbreak;\r\n\t\tye\r\n\tcase type.third:\r\n\t\tplayerWonLost.classList.remove( 'not-show-element' );\r\n\t\tplayerWonLost.querySelector( '.player-number' )\r\n\t\t\t.textContent = \"2\";\r\n\t\ticonContainer.classList.add( \"msg-background-x\" )\r\n\t\ttakesRound.classList.remove( 'not-show-element' );\r\n\t\ttakesRound.style.color = cssRootStyle.getPropertyValue( \"--light-blue\" );\r\n\t\tbreak;\r\n\tcase type.fourth:\r\n\t\tplayerWonLost.classList.remove( 'not-show-element' );\r\n\t\tplayerWonLost.querySelector( '.player-number' )\r\n\t\t\t.textContent = \"2\";\r\n\t\ticonContainer.classList.add( 'msg-background-o' );\r\n\t\ttakesRound.classList.remove( 'not-show-element' );\r\n\t\ttakesRound.style.color = cssRootStyle.getPropertyValue( \"--light-yellow\" );\r\n\t\tbreak;\r\n\tcase type.fifth:\r\n\t\twon.classList.remove( 'not-show-element' );\r\n\t\ticonContainer.classList.add( 'msg-background-x' );\r\n\t\ttakesRound.classList.remove( 'not-show-element' );\r\n\t\ttakesRound.style.color = cssRootStyle.getPropertyValue( \"--light-blue\" );\r\n\t\tbreak;\r\n\tcase type.sixth:\r\n\t\twon.classList.remove( 'not-show-element' );\r\n\t\ticonContainer.classList.add( 'msg-background-o' );\r\n\t\ttakesRound.classList.remove( 'not-show-element' );\r\n\t\ttakesRound.style.color = cssRootStyle.getPropertyValue( \"--light-yellow\" );\r\n\t\tbreak;\r\n\tcase type.seventh:\r\n\t\tlost.classList.remove( 'not-show-element' );\r\n\t\ticonContainer.classList.add( 'msg-background-x' );\r\n\t\ttakesRound.classList.remove( 'not-show-element' );\r\n\t\ttakesRound.style.color = cssRootStyle.getPropertyValue( \"--light-blue\" );\r\n\t\tbreak;\r\n\tcase type.eighth:\r\n\t\tlost.classList.remove( 'not-show-element' );\r\n\t\ticonContainer.classList.add( 'msg-background-o' );\r\n\t\ttakesRound.classList.remove( 'not-show-element' );\r\n\t\ttakesRound.style.color = cssRootStyle.getPropertyValue( \"--light-yellow\" );\r\n\t\tbreak;\r\n\tcase type.nineth:\r\n\t\ticonContainer.classList.add( 'not-show-element' );\r\n\t\trestart.classList.remove( 'not-show-element' );\r\n\t\tbreak;\r\n\tcase type.tenth:\r\n\t\ticonContainer.classList.add( 'not-show-element' );\r\n\t\ttied.classList.remove( 'not-show-element' );\r\n\t\tbreak;\r\n\t}\r\n\tif ( kind === type.nineth ) {\r\n\t\tquitCancelBtn.classList.replace( 'quit-btn', 'quit-resize' );\r\n\t\troundRestartBtn.classList.replace(\r\n\t\t\t'nextround-restart-btn',\r\n\t\t\t'next-round-resize'\r\n\t\t);\r\n\t\tquitCancelBtn.querySelector( 'h5' )\r\n\t\t\t.textContent = 'no, cancel';\r\n\t\troundRestartBtn.querySelector( 'h5' )\r\n\t\t\t.textContent =\r\n\t\t\t'yes, restart';\r\n\t} else {\r\n\t\tquitCancelBtn.classList.replace( 'quit-resize', 'quit-btn' );\r\n\t\troundRestartBtn.classList.replace(\r\n\t\t\t'next-round-resize',\r\n\t\t\t'nextround-restart-btn'\r\n\t\t);\r\n\t\tquitCancelBtn.querySelector( 'h5' )\r\n\t\t\t.textContent = 'quit';\r\n\t\troundRestartBtn.querySelector( 'h5' )\r\n\t\t\t.textContent = 'next round';\r\n\t};\r\n\tdialogBox.setAttribute( \"data-type\", kind );\r\n}\r\n\r\nfunction resetDialog() {\r\n\tlet dialogElemList = document.querySelectorAll( \"#dialog-box p, #dialog-box h3, #dialog-box svg\" );\r\n\tfor ( let [ key, entrie ] of dialogElemList.entries() ) {\r\n\t\tentrie.classList.add( 'not-show-element' );\r\n\t};\r\n\ticonContainer.classList.remove( 'not-show-element' );\r\n}\r\n\r\nfunction restartNewRound() {\r\n\tcellsGrid.resetGrid();\r\n\tturn.reset();\r\n\tplayer1.reset();\r\n\tplayer2.reset();\r\n\tif ( player2.name === \"CPU\" ) {\r\n\t\tcomputer.initialize();\r\n\t}\r\n\trestartBtn.setAttribute( \"disabled\", \"\" );\r\n\tpopulateStorage();\r\n\tif ( player2.mark === \"x\" && player2.name === 'CPU' ) {\r\n\t\tlet computerMove = computer.chooseMove();\r\n\t\tplayer2.generateClick( computerMove );\r\n\t}\r\n}\r\n\r\nfunction cellsCreator() {\r\n\tlet cellsArray = [ 0, 0, 0, 0, 0, 0, 0, 0, 0 ];\r\n\tlet cellPosition;\r\n\tfor ( [ cellElementKey, cellElement ] of cellElements.entries() ) {\r\n\t\tvar cell = new Cell( cellElement.id, cellElement );\r\n\t\tcellPosition = Number( cellElement.id ) - 1;\r\n\t\tcellsArray.splice( cellPosition, 1, cell );\r\n\t}\r\n\treturn cellsArray\r\n};\r\n\r\n// ------------------------------session storage functions----------------------\r\nfunction populateStorage() {\r\n\r\n\t// HTML\r\n\t// new Game\r\n\tnewGameClass = newGame.getAttribute( \"class\" );\r\n\tsessionStorage.setItem( \"new-game\", newGameClass );\r\n\txChoiceButtonClass = markBtnX.getAttribute( \"class\" );\r\n\toChoiceButtonClass = markBtnO.getAttribute( \"class\" );\r\n\tsessionStorage.setItem( \"x-choice-button\", xChoiceButtonClass );\r\n\tsessionStorage.setItem( \"o-choice-button\", oChoiceButtonClass );\r\n\r\n\t// start\r\n\tstartClass = start.getAttribute( \"class\" );\r\n\tsessionStorage.setItem( \"start\", startClass );\r\n\tturnIconXClass = turnIconX.getAttribute( \"class\" );\r\n\tturnIconOClass = turnIconO.getAttribute( \"class\" );\r\n\tsessionStorage.setItem( \"turnIconX\", turnIconXClass );\r\n\tsessionStorage.setItem( \"turnIconO\", turnIconOClass );\r\n\trestartBtnClass = restartBtn.getAttribute( \"class\" );\r\n\tsessionStorage.setItem( \"restart-btn\", restartBtnClass );\r\n\tcellsClass = {};\r\n\tfor ( cell of cells ) {\r\n\t\tif ( cell ) {\r\n\t\t\tcellsClass[ cell.id ] = document.getElementById( cell.id )\r\n\t\t\t\t.getAttribute( \"class\" );\r\n\t\t}\r\n\t}\r\n\tsessionStorage.setItem( \"cellsClassObj\", JSON.stringify( cellsClass ) );\r\n\r\n\txScoreContent = {\r\n\t\txScorePlayer: xScore.querySelector( \"p\" )\r\n\t\t\t.innerHTML,\r\n\t\txScoreScore: xScore.querySelector( \"h4\" )\r\n\t\t\t.innerHTML\r\n\t};\r\n\toScoreContent = {\r\n\t\toScorePlayer: oScore.querySelector( \"p\" )\r\n\t\t\t.innerHTML,\r\n\t\toScoreScore: oScore.querySelector( \"h4\" )\r\n\t\t\t.innerHTML\r\n\t};\r\n\ttieContent = tie.querySelector( \"h4\" )\r\n\t\t.textContent;\r\n\tsessionStorage.setItem( \"xScoreContentObj\", JSON.stringify( xScoreContent ) );\r\n\tsessionStorage.setItem( \"oScoreContentObj\", JSON.stringify( oScoreContent ) );\r\n\tsessionStorage.setItem( \"tieContent\", tieContent );\r\n\r\n\t// GETTING JAVASCRIPT OBJECTS\r\n\tmarkObj = mark.getProperties;\r\n\tturnObj = turn.getProperties;\r\n\tplayer1Obj = player1.getProperties;\r\n\tplayer2Obj = player2.getProperties;\r\n\tcellObjs.length = 0;\r\n\tfor ( cell of cells ) {\r\n\t\tcellObjs.push( cell.getProperties )\r\n\t}\r\n\tcellsGridObj = cellsGrid.getProperties;\r\n\tcomputerObj = computer.getProperties;\r\n\r\n\tsessionStorage.setItem( \"mark\", JSON.stringify( markObj ) );\r\n\tsessionStorage.setItem( \"turn\", JSON.stringify( turnObj ) );\r\n\tsessionStorage.setItem( \"player1\", JSON.stringify( player1Obj ) );\r\n\tsessionStorage.setItem( \"player2\", JSON.stringify( player2Obj ) );\r\n\tsessionStorage.setItem( \"cells\", JSON.stringify( cellObjs ) );\r\n\tsessionStorage.setItem( \"cellsGrid\", JSON.stringify( cellsGridObj ) );\r\n\tsessionStorage.setItem( \"computer\", JSON.stringify( computerObj ) );\r\n}\r\n\r\nfunction populateDialogStorage() {\r\n\tvar dialogBoxObj = {\r\n\t\tdialogBoxOpen: dialogBox.hasAttribute( \"open\" ),\r\n\t\ttype: dialogBox.dataset.type\r\n\t};\r\n\tsessionStorage.setItem( \"dialogBoxStyle\", JSON.stringify( dialogBoxObj ) );\r\n}\r\n\r\nfunction setStyle() {\r\n\t// new game\r\n\tnewGameClass = sessionStorage.getItem( \"new-game\" );\r\n\tnewGame.setAttribute( \"class\", newGameClass );\r\n\txChoiceButtonClass = sessionStorage.getItem( \"x-choice-button\" );\r\n\tmarkBtnX.setAttribute( \"class\", xChoiceButtonClass );\r\n\toChoiceButtonClass = sessionStorage.getItem( \"o-choice-button\" );\r\n\tmarkBtnO.setAttribute( \"class\", oChoiceButtonClass );\r\n\r\n\t// start\r\n\tstartClass = sessionStorage.getItem( \"start\" );\r\n\tstart.setAttribute( \"class\", startClass );\r\n\tturnIconXClass = sessionStorage.getItem( \"turnIconX\" );\r\n\tturnIconX.setAttribute( \"class\", turnIconXClass );\r\n\tturnIconOClass = sessionStorage.getItem( \"turnIconO\" );\r\n\tturnIconO.setAttribute( \"class\", turnIconOClass );\r\n\trestartBtnClass = sessionStorage.getItem( \"restart-btn\" );\r\n\trestartBtn.setAttribute( \"class\", restartBtnClass );\r\n\tcellsClass = JSON.parse( sessionStorage.getItem( \"cellsClassObj\" ) );\r\n\tif ( cellsClass ) {\r\n\t\tfor ( [ key, value ] of Object.entries( cellsClass ) ) {\r\n\t\t\tdocument.getElementById( key )\r\n\t\t\t\t.setAttribute( 'class', value );\r\n\t\t}\r\n\t}\r\n\txScoreContent = JSON.parse( sessionStorage.getItem( \"xScoreContentObj\" ) );\r\n\toScoreContent = JSON.parse( sessionStorage.getItem( \"oScoreContentObj\" ) );\r\n\ttieContent = sessionStorage.getItem( \"tieContent\" );\r\n\txScore.querySelector( \"p\" )\r\n\t\t.innerHTML = xScoreContent.xScorePlayer;\r\n\txScore.querySelector( \"h4\" )\r\n\t\t.innerHTML = xScoreContent.xScoreScore;\r\n\r\n\toScore.querySelector( \"p\" )\r\n\t\t.innerHTML = oScoreContent.oScorePlayer;\r\n\toScore.querySelector( \"h4\" )\r\n\t\t.innerHTML = oScoreContent.oScoreScore;\r\n\r\n\ttie.querySelector( \"h4\" )\r\n\t\t.textContent = tieContent;\r\n\r\n\t// DIALOG\r\n\tif ( sessionStorage.getItem( \"dialogBoxStyle\" ) ) {\r\n\t\tvar dialogBoxObj = JSON.parse( sessionStorage.getItem( \"dialogBoxStyle\" ) );\r\n\t\tif ( dialogBoxObj.dialogBoxOpen ) {\r\n\t\t\tdialogBox.show();\r\n\t\t\tconfigurePoppupDialog( dialogBoxObj.type );\r\n\t\t}\r\n\t}\r\n\t// JAVASCRIPT\r\n\tmarkObj = JSON.parse( sessionStorage.getItem( \"mark\" ) );\r\n\tturnObj = JSON.parse( sessionStorage.getItem( \"turn\" ) );\r\n\tplayer1Obj = JSON.parse( sessionStorage.getItem( \"player1\" ) );\r\n\tplayer2Obj = JSON.parse( sessionStorage.getItem( \"player2\" ) );\r\n\tcellObjs = JSON.parse( sessionStorage.getItem( 'cells' ) );\r\n\tcellsGridObj = JSON.parse( sessionStorage.getItem( \"cellsGrid\" ) );\r\n\tcomputerObj = JSON.parse( sessionStorage.getItem( \"computer\" ) );\r\n\r\n\tmark.setProperties = markObj;\r\n\tturn.setProperties = turnObj;\r\n\tplayer1.setProperties = player1Obj;\r\n\tplayer2.setProperties = player2Obj;\r\n\tcells.forEach( ( cell, index ) => {\r\n\t\tcell.setProperties = cellObjs[ index ];\r\n\t} );\r\n\tcellsGrid.setProperties = cellsGridObj\r\n\tcellsGrid.addAllCellsClickEvent();\r\n\tcomputer.setProperties = computerObj;\r\n}\r\n\r\n// ============================================================================\r\n//---------------------------CREATING OBJECTS ---------------------------------\r\n// ============================================================================\r\n// creating mark object\r\nconst mark = new Mark();\r\n// creating player objects\r\nconst player1 = new Player();\r\nconst player2 = new Player();\r\nconst computer = new Computer();\r\n// creating Turn OBJECT\r\nconst turn = new Turn();\r\n//Arrays of cell\r\nconst cells = cellsCreator();\r\n// creating cellsGrid OBJECT to group and manage the cells all\r\nconst cellsGrid = new CellsGrid();\r\n// ============================================================================\r\n// --------------------------------------EVENTS--------------------------------\r\n// ============================================================================\r\n// Buttons\r\n//adding event to choose the player1's mark\r\nfor ( let button of [ markBtnX, markBtnO ] ) {\r\n\tbutton.addEventListener( 'click', () => {\r\n\t\tmark.switch();\r\n\t\tpopulateStorage();\r\n\t} );\r\n}\r\nplayerVsPlayerButton.addEventListener( 'click', function () {\r\n\t// initializing player objects\r\n\tplayer1.mark = mark.p1Mark;\r\n\tplayer1.name = 'P1';\r\n\tplayer2.mark = mark.p2Mark;\r\n\tplayer2.name = 'P2';\r\n\tplayer1.initializeScore();\r\n\tplayer2.initializeScore();\r\n\tnewGame.classList.add( 'not-show-element' );\r\n\tstart.classList.remove( 'not-show-element' );\r\n\tcellsGrid.init();\r\n\tpopulateStorage();\r\n} );\r\ncpuVsPlayerButton.addEventListener( \"click\", function () {\r\n\tplayer1.mark = mark.p1Mark;\r\n\tplayer1.name = \"P1\";\r\n\tplayer2.mark = mark.p2Mark;\r\n\tplayer2.name = \"CPU\";\r\n\tplayer1.initializeScore();\r\n\tplayer2.initializeScore();\r\n\tnewGame.classList.add( 'not-show-element' );\r\n\tstart.classList.remove( 'not-show-element' );\r\n\tcellsGrid.init();\r\n\tcomputer.initialize();\r\n\tif ( player2.mark === \"x\" ) {\r\n\t\tlet computerMove = computer.chooseMove();\r\n\t\tplayer2.generateClick( computerMove );\r\n\t}\r\n\tpopulateStorage();\r\n} );\r\n\r\n// dialog events\r\nquitCancelBtn.addEventListener( \"click\", ( e ) => {\r\n\tif ( e.target.textContent.toLowerCase() === \"quit\" ) {\r\n\t\t// reload the page without creating a history entry\r\n\t\tsessionStorage.clear();\r\n\t\twindow.location.reload();\r\n\t} else {\r\n\t\tresetDialog();\r\n\t\tdialogBox.close();\r\n\t\tpopulateDialogStorage();\r\n\t}\r\n} );\r\nroundRestartBtn.addEventListener( \"click\", () => {\r\n\trestartNewRound();\r\n\tresetDialog();\r\n\tdialogBox.close();\r\n\tpopulateDialogStorage();\r\n} );\r\nrestartBtn.addEventListener( \"click\", () => {\r\n\tconfigurePoppupDialog( \"restart\" )\r\n\tdialogBox.show();\r\n\tpopulateDialogStorage();\r\n} );\r\n\r\n//session storage events\r\nwindow.addEventListener( \"load\", () => {\r\n\tif ( sessionStorage.length ) {\r\n\t\tsetStyle();\r\n\t}\r\n} );","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}